(this["webpackJsonppubnub-demo-3"]=this["webpackJsonppubnub-demo-3"]||[]).push([[0],{12:function(e,t,n){e.exports=n(27)},17:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),s=n(9),r=n.n(s),i=(n(17),n(2)),l=n(3),c=n(5),u=n(4),m=n(11),p=function(e){return a.a.createElement("button",{className:"square",onClick:e.onClick},e.value)},b=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"createBoard",value:function(e,t){for(var n=[],o=0,s=0;s<e;s+=1){for(var r=[],i=0;i<t;i+=1)r.push(this.renderSquare(o++));n.push(a.a.createElement("div",{key:s,className:"board-row"},r))}return n}},{key:"renderSquare",value:function(e){var t=this;return a.a.createElement(p,{key:e,value:this.props.squares[e],onClick:function(){return t.props.onClick(e)}})}},{key:"render",value:function(){return a.a.createElement("div",null,this.createBoard(3,3))}}]),n}(a.a.Component),h=n(7),d=n.n(h),g=n(1),f=n.n(g),C=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).publishMove=function(e,t){var n=o.state.squares;n[e]=t,o.turn="X"===n[e]?"O":"X",o.setState({squares:n,whosTurn:!o.state.whosTurn}),o.checkForWinner(n)},o.onMakeMove=function(e){console.log("MOVE MADE");var t=o.state.squares;t[e]||o.turn!==o.props.piece||(t[e]=o.props.piece,o.setState({squares:t,whosTurn:!o.state.whosTurn}),o.turn="X"===o.turn?"O":"X",o.props.pubnub.publish({message:{index:e,piece:o.props.piece,turn:o.turn},channel:o.props.gameChannel}),o.checkForWinner(t))},o.checkForWinner=function(e){for(var t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],n=0;n<t.length;n+=1){var a=Object(m.a)(t[n],3),s=a[0],r=a[1],i=a[2];if(e[s]&&e[s]===e[r]&&e[s]===e[i])return void o.announceWinner(e[s])}o.counter++,9===o.counter&&(o.gameOver=!0,o.newRound(null))},o.announceWinner=function(e){var t={X:o.state.xScore,O:o.state.oScore};"X"===e?(t.X+=1,o.setState({xScore:t.X})):(t.O+=1,o.setState({oScore:t.O})),o.gameOver=!0,o.newRound(e)},o.newRound=function(e){var t=null===e?"Tie game!":"Player ".concat(e," won!");!1===o.props.isRoomCreator&&o.gameOver?(f.a.fire({position:"top",allowOutsideClick:!1,title:t,text:"Waiting for a new round...",confirmButtonColor:"rgb(208,33,41)",width:275,customClass:{heightAuto:!1,title:"title-class",popup:"popup-class",confirmButton:"button-class"}}),o.turn="X"):o.props.isRoomCreator&&o.gameOver&&f.a.fire({position:"top",allowOutsideClick:!1,title:t,text:"Continue Playing?",showCancelButton:!0,confirmButtonColor:"rgb(208,33,41)",cancelButtonColor:"#aaa",cancelButtonText:"Nope",confirmButtonText:"Yea!",width:275,customClass:{heightAuto:!1,title:"title-class",popup:"popup-class",confirmButton:"button-class",cancelButton:"button-class"}}).then((function(e){e.value?o.props.pubnub.publish({message:{reset:!0},channel:o.props.gameChannel}):o.props.pubnub.publish({message:{endGame:!0},channel:o.props.gameChannel})}))},o.state={squares:Array(9).fill(""),xScore:0,oScore:0,whosTurn:o.props.myTurn},o.turn="X",o.gameOver=!1,o.counter=0,o}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(){var e=this;this.props.pubnub.addListener({message:function(t){t.message.turn===e.props.piece&&e.publishMove(t.message.index,t.message.piece)}})}},{key:"render",value:function(){var e,t=this;return e="".concat(this.state.whosTurn?"Your turn":"Opponent's turn"),a.a.createElement("div",{className:"game"},a.a.createElement("div",{className:"board"},a.a.createElement(b,{squares:this.state.squares,onClick:function(e){return t.onMakeMove(e)}}),a.a.createElement("p",{className:"status-info"},e)),a.a.createElement("div",{className:"scores-container"},a.a.createElement("div",null,a.a.createElement("p",null,"Player X: ",this.state.xScore)),a.a.createElement("div",null,a.a.createElement("p",null,"Player O: ",this.state.oScore))))}}]),n}(a.a.Component),v=n(10),y=n.n(v),w=(n(26),function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).onPressJoin=function(e){f.a.fire({position:"top",input:"text",allowOutsideClick:!1,inputPlaceholder:"Enter the room id",showCancelButton:!0,confirmButtonColor:"rgb(208,33,41)",confirmButtonText:"OK",width:275,padding:"0.7em",customClass:{heightAuto:"popup-class",confirmButton:"join-button-class",cancelButton:"join-button-class"}}).then((function(e){e.value&&o.joinRoom(e.value)}))},o.joinRoom=function(e){o.roomId=e,o.lobbyChannel="tictactoelobby--"+o.roomId,o.pubnub.hereNow({channels:[o.lobbyChannel]}).then((function(e){console.log("currently broke",e.totalOccupancy),e.totalOccupancy<2?(console.log("if",o.lobbyChannel),o.pubnub.subscribe({channels:[o.lobbyChannel],withPresence:!0}),o.setState({piece:"O"}),o.pubnub.publish({message:{notRoomCreator:!0},channel:o.lobbyChannel})):(console.log("else"),f.a.fire({position:"top",allowOutsideClick:!1,title:"Error",text:"Game in progress, Try another room.",width:275,padding:"0.7em",customClass:{heightAuto:!1,title:"title-class",popup:"popup-class",confirmButton:"button-class"}}))})).catch((function(e){console.log(e)}))},o.onPressCreate=function(e){o.roomId=y.a.generate().substring(0,5),o.lobbyChannel="tictactoelobby--"+o.roomId,console.log(o.lobbyChannel),o.pubnub.subscribe({channels:[o.lobbyChannel],withPresence:!0}),f.a.fire({position:"top",allowOutsideClick:!1,title:"Share this room ID with your friends",text:o.roomId,width:275,padding:"0.7em",customClass:{heightAuto:!1,title:"title-class",popup:"popup-class",confirmButton:"button-class"}}),o.setState({piece:"X",isRoomCreator:!0,isDisabled:!0,myTurn:!0})},o.endGame=function(){o.setState({piece:"",isPlaying:!1,isRoomCreator:!1,isDisabled:!1,myTurn:!1}),o.lobbyChannel=null,o.gameChannel=null,o.roomId=null,o.pubnub.unsubscribe({channels:[o.lobbyChannel,o.gameChannel]})},o.pubnub=new d.a({publishKey:"pub-c-3d2acc0c-8090-4539-947a-c77a05dc8cf4",subscribeKey:"sub-c-51720ec4-0b21-11eb-b978-f27038723aa3"}),o.state={piece:"",isPlaying:!1,isRoomCreator:!1,isDisabled:!1,myTurn:!1},o.lobbyChannel=null,o.gameChannel=null,o.roomId=null,o.pubnub.addListener({message:function(e){console.log(e),console.log("fixed?",e.message.notRoomCreator),e.message.notRoomCreator&&(o.gameChannel="tictactoegame--"+o.roomId,o.pubnub.subscribe({channels:[o.gameChannel]}),console.log("got thing"),o.setState({isPlaying:!0}),f.a.close())}}),o}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.pubnub.unsubscribe({channels:[this.lobbyChannel,this.gameChannel]})}},{key:"render",value:function(){var e,t=this;return e="".concat(this.state.isPlaying?"Playing":"NotPlaying"),a.a.createElement("div",null,a.a.createElement("div",{className:"title"},a.a.createElement("p",null," React Tic Tac Toe... ",e," Current ID: ",this.roomId)),!this.state.isPlaying&&a.a.createElement("div",{className:"game"},a.a.createElement("div",{className:"board"},a.a.createElement(b,{squares:0,onClick:function(e){return null}}),a.a.createElement("div",{className:"button-container"},a.a.createElement("button",{className:"create-button ",disabled:this.state.isDisabled,onClick:function(e){return t.onPressCreate()}}," Create"),a.a.createElement("button",{className:"join-button",onClick:function(e){return t.onPressJoin()}},"join")))),this.state.isPlaying&&a.a.createElement(C,{pubnub:this.pubnub,gameChannel:this.gameChannel,piece:this.state.piece,isRoomCreator:this.state.isRoomCreator,myTurn:this.state.myTurn,xUsername:this.state.xUsername,oUsername:this.state.oUsername,endGame:this.endGame}))}}]),n}(o.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[12,1,2]]]);
//# sourceMappingURL=main.4613915b.chunk.js.map